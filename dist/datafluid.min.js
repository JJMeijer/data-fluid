(()=>{var d=r=>{let n=/\[object (Boolean|Symbol|Undefined|Null|Math|Error|Number|String|Set|Function|Array|Date|Regexp)\]/,e=n.exec(Object.prototype.toString.call(r));return e?e[1].toLowerCase():"object"},p=r=>{Object.keys(r).forEach(n=>{let e=d(r[n]);if(e!==n)throw new Error(`${e} provided. ${n} was expected`)})},b=r=>JSON.parse(JSON.stringify(r)),h=r=>{if(d(r)==="object")return JSON.stringify(r)==="{}";if(d(r)==="array"){let n=r;return n.length===0}if(d(r)==="string"){let n=r;return n.length===0}return!1},m=r=>{let n=/^(boolean|number|string|date|array|object)$/,e=d(r),c=n.exec(e);return!!c&&!h(r)},g=(r,n,e,c="")=>{let a=r;return Object.keys(n).forEach(i=>{let f=c?`${c}.${i}`:i,y=d(r[i]),t=d(n[i]),s=y===t,l=r[i],o=n[i];if(m(o)){if(t==="object"){let u=o,F=s?l:{},j=b(F);a[i]=g(F,u,e,f),j!==a[i]&&e(f,{[i]:b(u)},!1)}if(t==="array"){let u=o,F=s?l:[];a[i]=Array.prototype.concat.call(F,u),e(f,{[i]:b(u)},!1)}if(t.match(/^(boolean|number|string|date)$/)){let u=l!==o;a[i]=o,u&&e(f,{[i]:o},!1)}}}),a};window.DataFluid=()=>{let r=[],n={},e=t=>{p({object:t});let s=n;n=g(s,t,i)},c={},a={},i=(t,s,l=!0)=>{p({string:t,object:s}),c[t]&&c[t].forEach(o=>o(s)),a[t]&&(a[t].forEach(o=>o(s)),a[t]=[]),l&&r.push({event:t,data:s})},f=(t,s)=>{p({string:t,function:s}),c[t]=c[t]||[],c[t].push(s);let l=r.filter(o=>Object.keys(o)[0]===t);l.forEach(o=>i(o.event,o.data))},y=(t,s)=>{p({string:t,function:s}),a[t]=a[t]||[],a[t].push(s);let l=r.filter(o=>Object.keys(o)[0]===t);l.forEach((o,u)=>{u===0&&i(o.event,o.data)})};return{events:r,data:n,set:e,on:f,once:y,trigger:i}};})();
